"use strict";function DestekValidator(){this.cpf=function(e){for(var t=e.replace("-","").replace(".","").replace(".",""),a=0;10>a;a++){var n=a+""+a+a+a+a+a+a+a+a+a+a;if(t==n)return!1}for(var s=0,a=0;9>a;a++){var r=10-a,o=parseInt(t[a]);s+=o*r}var i=10*s%11;if((10==i||11==i)&&(i=0),t[9]==i){for(var s=0,a=0;10>a;a++){var r=11-a,o=parseInt(t[a]);s+=o*r}return i=10*s%11,t[10]==i?!0:!1}return!1},this.email=function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},this.phone=function(e){e=e.replace(" ",""),e=e.replace("-",""),e=e.replace(")",""),e=e.replace("(","");var t=/^\d+$/;return t.test(e)},this.zip=function(t){var a=!1;return $.ajax({url:"http://apps.widenet.com.br/busca-cep/api/cep/"+t+".json",context:document.body}).done(function(t){void 0===t.message?($("#rua").length>0&&($("#rua").val(t.address),e.ui("rua",!0)),$("#numero").length>0&&$("#numero").val(""),$("#complemento").length>0&&$("#complemento").val(""),$("#bairro").length>0&&($("#bairro").val(t.district),e.ui("bairro",!0)),$("#cidade").length>0&&($("#cidade").val(t.city),e.ui("cidade",!0)),$("#estado").length>0&&($("#estado").val(t.state),e.ui("estado",!0)),e.ui("cep",!0),a=!0):a=!1}),a},this.ui=function(e,t){var a={nome:"O campo não pode estar vazio",cpf:"Digite um CPF válido",email:"O campo deve conter um '@'",telefone:"Digite um telefone válido",empresa:"Digite aqui o nome da empresa",funcao:"Digite aqui seu cargo na empresa",escolaridade:"Qual a sua Instituíção de ensino ?",curso:"Qual o seu curso?",rua:"O campo não pode estar vazio",numero:"O campo não pode estar vazio",complemento:"O campo não pode estar vazio",bairro:"O campo não pode estar vazio",cidade:"O campo não pode estar vazio",estado:"O campo não pode estar vazio",cep:"Digite um CEP válido"},n={nome:"Nome",cpf:"CPF",email:"Email",telefone:"Telefone",empresa:"Empresa",funcao:"Cargo",escolaridade:"Escolaridade",curso:"curso",rua:"Rua",numero:"Número",complemento:"Complemento",bairro:"Bairro",cidade:"Cidade",estado:"Estado",cep:"CEP"},s=$("#"+e).parent().children("span");t===!0?($("#"+e).attr("class").indexOf("invalid")>-1&&($("#"+e).removeClass("invalid"),s.removeClass("invalid"),s.html(n[e])),$("#"+e).addClass("valid"),s.addClass("valid")):($("#"+e).attr("class").indexOf("valid")>-1&&($("#"+e).removeClass("valid"),s.removeClass("valid")),$("#"+e).addClass("invalid"),s.addClass("invalid"),s.html(a[e]))};var e=this}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery||Zepto)}(function(e){var t=function(t,a,n){t=e(t);var s,r=this,o=t.val();a="function"==typeof a?a(t.val(),void 0,t,n):a;var i={invalid:[],getCaret:function(){try{var e,a=0,n=t.get(0),s=document.selection,r=n.selectionStart;return s&&-1===navigator.appVersion.indexOf("MSIE 10")?(e=s.createRange(),e.moveStart("character",t.is("input")?-t.val().length:-t.text().length),a=e.text.length):(r||"0"===r)&&(a=r),a}catch(o){}},setCaret:function(e){try{if(t.is(":focus")){var a,n=t.get(0);n.setSelectionRange?n.setSelectionRange(e,e):n.createTextRange&&(a=n.createTextRange(),a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",e),a.select())}}catch(s){}},events:function(){t.on("keyup.mask",i.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){o===t.val()||t.data("changed")||t.triggerHandler("change"),t.data("changed",!1)}).on("keydown.mask, blur.mask",function(){o=t.val()}).on("focus.mask",function(t){n.selectOnFocus===!0&&e(t.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!s.test(i.val())&&i.val("")})},getRegexMask:function(){for(var e,t,n,s,o,i,d=[],l=0;l<a.length;l++)e=r.translation[a.charAt(l)],e?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=e.optional,s=e.recursive,s?(d.push(a.charAt(l)),o={digit:a.charAt(l),pattern:t}):d.push(n||s?t+"?":t)):d.push(a.charAt(l).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return i=d.join(""),o&&(i=i.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(i)},destroyEvents:function(){t.off(["keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var a,n=t.is("input"),s=n?"val":"text";return arguments.length>0?(t[s]()!==e&&t[s](e),a=t):a=t[s](),a},getMCharsBeforeCount:function(e,t){for(var n=0,s=0,o=a.length;o>s&&e>s;s++)r.translation[a.charAt(s)]||(e=t?e+1:e,n++);return n},caretPos:function(e,t,n,s){var o=r.translation[a.charAt(Math.min(e-1,a.length-1))];return o?Math.min(e+n-t-s,n):i.caretPos(e+1,t,n,s)},behaviour:function(t){t=t||window.event,i.invalid=[];var a=t.keyCode||t.which;if(-1===e.inArray(a,r.byPassKeys)){var n=i.getCaret(),s=i.val(),o=s.length,d=o>n,l=i.getMasked(),c=l.length,p=i.getMCharsBeforeCount(c-1)-i.getMCharsBeforeCount(o-1);return i.val(l),!d||65===a&&t.ctrlKey||(8!==a&&46!==a&&(n=i.caretPos(n,o,c,p)),i.setCaret(n)),i.callbacks(t)}},getMasked:function(e){var t,s,o=[],d=i.val(),l=0,c=a.length,p=0,u=d.length,m=1,v="push",k=-1;for(n.reverse?(v="unshift",m=-1,t=0,l=c-1,p=u-1,s=function(){return l>-1&&p>-1}):(t=c-1,s=function(){return c>l&&u>p});s();){var h=a.charAt(l),f=d.charAt(p),g=r.translation[h];g?(f.match(g.pattern)?(o[v](f),g.recursive&&(-1===k?k=l:l===t&&(l=k-m),t===k&&(l-=m)),l+=m):g.optional?(l+=m,p-=m):g.fallback?(o[v](g.fallback),l+=m,p-=m):i.invalid.push({p:p,v:f,e:g.pattern}),p+=m):(e||o[v](h),f===h&&(p+=m),l+=m)}var C=a.charAt(t);return c!==u+1||r.translation[C]||o.push(C),o.join("")},callbacks:function(e){var s=i.val(),r=s!==o,d=[s,e,t,n],l=function(e,t,a){"function"==typeof n[e]&&t&&n[e].apply(this,a)};l("onChange",r===!0,d),l("onKeyPress",r===!0,d),l("onComplete",s.length===a.length,d),l("onInvalid",i.invalid.length>0,[s,e,t,i.invalid,n])}};r.mask=a,r.options=n,r.remove=function(){var e=i.getCaret();return i.destroyEvents(),i.val(r.getCleanVal()),i.setCaret(e-i.getMCharsBeforeCount(e)),t},r.getCleanVal=function(){return i.getMasked(!0)},r.init=function(a){if(a=a||!1,n=n||{},r.byPassKeys=e.jMaskGlobals.byPassKeys,r.translation=e.jMaskGlobals.translation,r.translation=e.extend({},r.translation,n.translation),r=e.extend(!0,{},r,n),s=i.getRegexMask(),a===!1){n.placeholder&&t.attr("placeholder",n.placeholder),t.attr("autocomplete","off"),i.destroyEvents(),i.events();var o=i.getCaret();i.val(i.getMasked()),i.setCaret(o+i.getMCharsBeforeCount(o,!0))}else i.events(),i.val(i.getMasked())},r.init(!t.is("input"))};e.maskWatchers={};var a=function(){var a=e(this),s={},r="data-mask-",o=a.attr("data-mask");return a.attr(r+"reverse")&&(s.reverse=!0),a.attr(r+"clearifnotmatch")&&(s.clearIfNotMatch=!0),"true"===a.attr(r+"selectonfocus")&&(s.selectOnFocus=!0),n(a,o,s)?a.data("mask",new t(this,o,s)):void 0},n=function(t,a,n){n=n||{};var s=e(t).data("mask"),r=JSON.stringify,o=e(t).val()||e(t).text();try{return"function"==typeof a&&(a=a(o)),"object"!=typeof s||r(s.options)!==r(n)||s.mask!==a}catch(i){}};e.fn.mask=function(a,s){s=s||{};var r=this.selector,o=e.jMaskGlobals,i=e.jMaskGlobals.watchInterval,d=function(){return n(this,a,s)?e(this).data("mask",new t(this,a,s)):void 0};return e(this).each(d),r&&""!==r&&o.watchInputs&&(clearInterval(e.maskWatchers[r]),e.maskWatchers[r]=setInterval(function(){e(document).find(r).each(d)},i)),this},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each(function(){var t=e(this).data("mask");t&&t.remove().removeData("mask")})},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(t){t=t||e.jMaskGlobals.maskElements;var n=t instanceof e?t:e(t);n.filter(e.jMaskGlobals.dataMaskAttr).each(a)};var s={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},s=e.jMaskGlobals=e.extend(!0,{},s,e.jMaskGlobals),s.dataMask&&e.applyDataMask(),setInterval(function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()},s.watchInterval)}),function(e){e.fn.destek=function(){function t(e,t){var a={name:"nome",code:"cpf",email:"email",phone:"telefone",company:"empresa",job:"funcao",schooling:"escolaridade",course:"curso",zip:"cep",street:"rua",number:"numero",complement:"complemento",neighborhood:"bairro",city:"cidade",state:"estado"},n={name:"Nome",code:"CPF",email:"Email",phone:"Telefone",company:"Empresa",job:"Cargo",schooling:"Escolaridade",course:"curso",zip:"CEP",street:"Rua",number:"Número",complement:"Complemento",neighborhood:"Bairro",city:"Cidade",state:"Estado"},s=document.createElement("div");for(var r in t){var o=t[r];if("name"==o||"code"==o||"email"==o||"phone"==o){if("personal"==e){var i=document.createElement("div");i.className="destek-grid";var d=document.createElement("input"),l=document.createElement("label"),c=document.createElement("span");c.className="destek-field-label",c.innerHTML=n[o],d.name=a[o],d.type="text",d.className="destek-field",d.id=a[o],l.appendChild(c),l.appendChild(d),i.appendChild(l),s.appendChild(i)}}else if("company"==o||"job"==o||"schooling"==o||"course"==o){if("profissional"==e){var i=document.createElement("div");i.className="destek-grid";var d=document.createElement("input"),l=document.createElement("label"),c=document.createElement("span");c.className="destek-field-label",c.innerHTML=n[o],d.name=a[o],d.type="text",d.className="destek-field",d.id=a[o],l.appendChild(c),l.appendChild(d),i.appendChild(l),s.appendChild(i)}}else if(("zip"==o||"street"==o||"number"==o||"complement"==o||"neighborhood"==o||"city"==o||"state"==o)&&"address"==e){var i=document.createElement("div");i.className="destek-grid";var d=document.createElement("input"),l=document.createElement("label"),c=document.createElement("span");c.className="destek-field-label",c.innerHTML=n[o],d.name=a[o],d.type="text",d.className="destek-field",d.id=a[o],l.appendChild(c),l.appendChild(d),i.appendChild(l),s.appendChild(i)}}return s}function a(a){void 0===a&&(a={}),void 0===a.fields&&(a.fields=[]);var s=document.createElement("div"),r=document.createElement("div"),o=document.createElement("div");s.className="destek-default",r.className="destek-steps",o.className="destek-content";for(var i=["Dados Pessoais","Dados Profissionais","Dados de Endereço"],d=0;3>d;d++){var l=document.createElement("div"),c=document.createElement("div");if(c.id="destek-step-"+(d+1),0===d?(l.className="destek-step-label destek-step-active",c.className="destek-step-content destek-step-active"):(l.className="destek-step-label",c.className="destek-step-content"),0===d){c.appendChild(t("personal",a.fields));var p=document.createElement("div");p.className="destek-grid destek-footer destek-previous",c.appendChild(p);var u=document.createElement("button");u.className="destek-button destek-next",u.innerHTML="Próximo",u.addEventListener("click",destekData.step.next);var p=document.createElement("div");p.className="destek-grid destek-footer destek-next",p.appendChild(u),c.appendChild(p)}else if(1==d){c.appendChild(t("profissional",a.fields));var m=document.createElement("button");m.className="destek-button destek-previous",m.innerHTML="Anterior",m.addEventListener("click",destekData.step.previous);var p=document.createElement("div");p.className="destek-grid destek-footer destek-previous",p.appendChild(m),c.appendChild(p);var u=document.createElement("button");u.className="destek-button destek-next",u.innerHTML="Próximo",u.addEventListener("click",destekData.step.next);var p=document.createElement("div");p.className="destek-grid destek-footer destek-next",p.appendChild(u),c.appendChild(p)}else if(2==d){c.appendChild(t("address",a.fields));var m=document.createElement("button");m.className="destek-button destek-previous",m.innerHTML="Anterior",m.addEventListener("click",destekData.step.previous);var p=document.createElement("div");p.className="destek-grid destek-footer destek-previous",p.appendChild(m),c.appendChild(p);var v=document.createElement("button");v.className="destek-button destek-success",v.innerHTML="Finalizar",v.addEventListener("click",destekData.events.submit);var p=document.createElement("div");p.className="destek-grid destek-footer destek-next",p.appendChild(v),c.appendChild(p)}l.innerHTML='<a class="destek-step-link" data-target="destek-step-'+(d+1)+'" href="#">'+i[d]+"</a>",r.appendChild(l),o.appendChild(c)}var k=document.createElement("div");k.id="destek-goodbye",k.className="destek-step-content",k.innerHTML='<h3 id="destek-goodbye-text">TEXTO</h3>';var v=document.createElement("button");v.id="destek-close-form",v.className="destek-button destek-success",v.innerHTML="Fechar",v.addEventListener("click",destekData.events.dispatch),k.appendChild(v);var h=document.createElement("button");h.id="destek-back-form",h.className="destek-button destek-error",h.innerHTML="Voltar",h.addEventListener("click",function(){destekData.step.set("destek-step-3")}),k.appendChild(h),o.appendChild(k),s.appendChild(r),s.appendChild(o),n[0].appendChild(s),destekData.mask(),e(".destek-step-link").click(function(){var t=e(this).data("target");destekData.step.set(t)}),e(".destek-field").blur(function(){destekData.events.validate(this.id)})}var n=this;return window.destekElement=n,{init:a}}}(jQuery);var validator=new DestekValidator,destekData={step:{current:0,set:function(e){$(".destek-step-content").each(function(){var e=$(this).attr("class");-1!=e.indexOf("destek-step-active")&&$(this).removeClass("destek-step-active")}),$(".destek-step-label").each(function(){var t=$(this).attr("class");-1!=t.indexOf("destek-step-active")&&$(this).removeClass("destek-step-active"),$(this).children("a").data("target")==e&&(destekData.step.current=parseInt(e.replace("destek-step-",""))-1,$(this).addClass("destek-step-active"),$("#"+e).addClass("destek-step-active"))})},next:function(){var e=destekData.step.current+1;destekData.step.set("destek-step-"+(e+1))},previous:function(){var e=destekData.step.current+1;destekData.step.set("destek-step-"+(e-1))}},mask:function(){$("#cpf").length>0&&$("#cpf").mask("000.000.000-00"),$("#telefone").length>0&&$("#telefone").mask("(00) 0000-0000"),$("#cep").length>0&&$("#cep").mask("00000-000")},variables:{dispatch:{message:null}},events:{validate:function(e){var t=$("#"+e).val();""!==t?"cpf"==e?validator.ui(e,validator.cpf(t)):"email"==e?validator.ui(e,validator.email(t)):"telefone"==e?validator.ui(e,validator.phone(t)):"cep"==e?(validator.zip(t),validator.ui(e,validator.zip(t))):validator.ui(e,!0):validator.ui(e,!1)},dispatch:function(){var e=new Event("destek-close-form");document.dispatchEvent(e)},submit:function(){var e={};$(".destek-field").each(function(){e[this.id]=this.value}),$.ajax({method:"POST",url:"destek.php",data:e}).done(function(){destekData.step.set(3),$("#destek-goodbye").addClass("destek-step-active"),$("#destek-goodbye-text").addClass("valid").html("Inscrito com sucesso"),$("#destek-close-form").css("display","inline"),$("#destek-back-form").css("display","none")}).error(function(){destekData.step.set(3),$("#destek-goodbye").addClass("destek-step-active"),$("#destek-goodbye-text").addClass("invalid").html("Erro ao inscrever"),$("#destek-back-form").css("display","inline"),$("#destek-close-form").css("display","none")})}}};